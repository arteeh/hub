<!DOCTYPE html>
<html lang="en">

<head>

	<!-- favicon stuff -->
	<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
	<link rel="manifest" href="favicons/site.webmanifest">
	<link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="favicons/favicon.ico">
	<meta name="msapplication-TileColor" content="#ef245f">
	<meta name="msapplication-config" content="favicons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="https://aframe.io/releases/1.6.0/aframe.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.4.0/dist/aframe-extras.min.js"></script>
	
</head>

<body>
	<a-scene>

		<a-assets>
			<a-asset-item id="earth"
						  src="assets/Earth.gltf"></a-asset-item>
			<a-asset-item id="ccollideonly"
						  src="assets/CCollideOnly.gltf"></a-asset-item>
			<a-asset-item id="cpebbles"
						  src="assets/CPebbles.gltf"></a-asset-item>
			<a-asset-item id="cleaves"
						  src="assets/CLeaves.gltf"></a-asset-item>
			<a-asset-item id="cphysical"
						  src="assets/CPhysical.gltf"></a-asset-item>
			<a-asset-item id="door"
						  src="assets/Door.gltf"></a-asset-item>
			<a-asset-item id="bench"
						  src="assets/Bench.gltf"></a-asset-item>
			<a-asset-item id="chair"
						  src="assets/Chair.gltf"></a-asset-item>
			<a-asset-item id="cntnrfltng"
						  src="assets/ContainerFloating.gltf"></a-asset-item>
			<a-asset-item id="lily00"
						  src="assets/Lily00.gltf"></a-asset-item>
			<a-asset-item id="lily01"
						  src="assets/Lily01.gltf"></a-asset-item>
			<a-asset-item id="sign"
						  src="assets/Sign.gltf"></a-asset-item>
			<img id="signimage"
				 src="assets/textures/signimagebg.png"></img>
			<img id="sky"
				 src="assets/textures/hdri-crabnebula.png"></img>
		</a-assets>

		<a-sky src="#sky"></a-sky>
		<a-plane id="respawnfloor"
				 trigger-enter
				 color="pink"
				 position="1 -3 0"
				 rotation="-90 0 0"
				 width="50"
				 height="50"
				 material="opacity: 0.1; side: double;"></a-plane>
		<a-plane id="invwallwest"
				 trigger-enter
				 color="green"
				 position="11 2 0"
				 rotation="0 90 0"
				 width="24"
				 height="6"
				 material="opacity: 0.1; side: double;"></a-plane>
		<a-plane id="invwallnorth"
				 trigger-enter
				 color="blue"
				 position="1 2 12"
				 rotation="0 0 0"
				 width="20"
				 height="6"
				 material="opacity: 0.1; side: double;"></a-plane>
		<a-plane id="invwallsouth"
				 trigger-enter
				 color="yellow"
				 position="1 2 -12"
				 rotation="0 0 0"
				 width="20"
				 height="6"
				 material="opacity: 0.1; side: double;"></a-plane>
		<a-plane id="invwalleast"
				 trigger-enter
				 color="pink"
				 position="-9 2 0"
				 rotation="0 90 0"
				 width="24"
				 height="6"
				 material="opacity: 0.1; side: double;"></a-plane>
		
		<a-entity id="earth"
				  gltf-model="#earth"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"
				  nav-mesh></a-entity>
		<a-entity id="ccollideonly"
				  gltf-model="#ccollideonly"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="cpebbles"
				  gltf-model="#cpebbles"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="cleaves"
				  gltf-model="#cleaves"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="door"
				  gltf-model="#door"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="bench"
				  gltf-model="#bench"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="chair"
				  gltf-model="#chair"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="sign"
				  gltf-model="#sign"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-image id="signimage"
				 src="#signimage"
				 position="9.09 1.1 6.21"
				 rotation="-10 219 5"
				 width="1.2"
				 height="0.5"></a-image>

		<!-- more dynamic stuff -->
		<a-entity id="cphysical"
				  gltf-model="#cphysical"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="cntnrfltng"
				  gltf-model="#cntnrfltng"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="lily00"
				  gltf-model="#lily00"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>
		<a-entity id="lily01"
				  gltf-model="#lily01"
				  position="0 0 0"
				  rotation="0 0 0"
				  scale="1 1 1"></a-entity>

		<script>
			AFRAME.registerComponent('trigger-enter', {
				init: function () {
					this.el.addEventListener('trigger-enter', () => {
						if (this.el.object3D.userData.isLocalPlayer) {
							// If player falls below the island, teleport back to spawn
							if (this.el.id == "respawnfloor") {
								MovePlayer(9, 0.25, 4);
							}
						}
					});
				}
			});
		</script>

		<!-- controls -->
		<a-entity id="rig"
				  movement-controls="constrainToNavMesh: true"
				  kinematic-body
				  position="9 0.25 4">
			<a-entity camera
					  position="0 1.6 0"
					  look-controls="pointerLockEnabled: true"></a-entity>
		</a-entity>

	</a-scene>
</body>

</html>